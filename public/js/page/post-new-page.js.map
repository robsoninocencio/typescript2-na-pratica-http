{"version":3,"file":"post-new-page.js","sourceRoot":"","sources":["../../../src/page/post-new-page.ts"],"names":[],"mappings":";;;IAMA;QACE,qBAAoB,QAAkB;YAAlB,aAAQ,GAAR,QAAQ,CAAU;YACpC,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC;QAED,0BAAI,GAAJ;YAAA,iBAQC;YAPC,QAAQ;iBACL,aAAa,CAAC,UAAU,CAAC;iBACzB,gBAAgB,CAAC,QAAQ,EAAE,UAAC,KAAY;gBACvC,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,KAAI,CAAC,MAAM,EAAE,CAAC;gBACd,MAAM,CAAC,KAAK,CAAC;YACf,CAAC,CAAC,CAAC;QACP,CAAC;QAED,4BAAM,GAAN;YAAA,iBAUC;YATC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;gBACpB,MAAM,CAAC;YACT,CAAC;YACD,IAAI,CAAC,QAAQ;iBACV,IAAI,CAAC;gBACJ,KAAK,EAAE,cAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC;gBACvC,IAAI,EAAE,cAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;aACtC,CAAC;iBACD,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,KAAI,CAAC,YAAY,EAAE,EAAnB,CAAmB,CAAC,CAAC;QACxC,CAAC;QAED,6BAAO,GAAP;YACE,IAAM,SAAS,GAAG,IAAI,2BAAgB,CAAC;gBACrC;oBACE,aAAa,EAAE,QAAQ;oBACvB,KAAK,EAAE,CAAC,oBAAU,CAAC,QAAQ,CAAC;oBAC5B,cAAc,EAAE,iBAAiB;iBAClC;gBACD;oBACE,aAAa,EAAE,OAAO;oBACtB,KAAK,EAAE,CAAC,oBAAU,CAAC,QAAQ,CAAC;oBAC5B,cAAc,EAAE,mBAAmB;iBACpC;aACF,CAAC,CAAC;YACH,MAAM,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QAED,kCAAY,GAAZ;YACE,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,sBAAsB,CAAC;QAChD,CAAC;QACH,kBAAC;IAAD,CAAC,AA9CD,IA8CC;;IAED,IAAI,WAAW,CAAC,IAAI,mBAAQ,EAAE,CAAC,CAAC","sourcesContent":["import Page from \"./page\";\nimport PostHttp from \"../http/post-http\";\nimport Form from \"../components/form\";\nimport ValidatorManager from \"../components/validators/validator-manager\";\nimport Validators from \"../components/validators/validators\";\n\nexport default class PostNewPage implements Page {\n  constructor(private postHttp: PostHttp) {\n    this.init();\n  }\n\n  init(): void {\n    document\n      .querySelector(\"#my-form\")\n      .addEventListener(\"submit\", (event: Event) => {\n        event.preventDefault();\n        this.submit();\n        return false;\n      });\n  }\n\n  submit(): void {\n    if (!this.isValid()) {\n      return;\n    }\n    this.postHttp\n      .save({\n        title: Form.getValueFromField(\"#title\"),\n        body: Form.getValueFromField(\"#body\"),\n      })\n      .then((obj) => this.goToPostList());\n  }\n\n  isValid(): boolean {\n    const validator = new ValidatorManager([\n      {\n        selectorField: \"#title\",\n        rules: [Validators.required],\n        messageInvalid: \"Título inválido\",\n      },\n      {\n        selectorField: \"#body\",\n        rules: [Validators.required],\n        messageInvalid: \"Conteúdo inválido\",\n      },\n    ]);\n    return validator.isValid();\n  }\n\n  goToPostList(): void {\n    window.location.href = \"/post/post-list.html\";\n  }\n}\n\nnew PostNewPage(new PostHttp());\n"]}